# ì£¼ì‹ ì»¤ë®¤ë‹ˆí‹° ì›¹ì‚¬ì´íŠ¸ <br/>(ë„ë©”ì¸ëª… : www.stockburning.shop)

## ğŸ‘¨â€ğŸ« í”„ë¡œì íŠ¸ ì†Œê°œ
ì‚¬ìš©ìë“¤ì´ íŠ¹ì • ì¢…ëª©ì— ëŒ€í•œ ì˜ê²¬ì„ ë‚˜ëˆ„ëŠ” í† ë¡  ê²Œì‹œíŒì„ ì œê³µí•˜ê³  ê°œì¸ì˜ ìƒìŠ¹ ë° í•˜ë½ ì˜ê²¬ì„ ê²Œì‹œê¸€ê³¼ í•¨ê»˜ í‘œí˜„ ê°€ëŠ¥í•˜ë©° ê²Œì‹œê¸€ì˜ ì‘ì„± ê°œìˆ˜ì™€ ìƒìŠ¹/í•˜ë½ ì˜ê²¬ì„ í†µí•´ íˆ¬ì ì‹¬ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ ì§€í‘œ í˜•ì‹ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ì£¼ì‹ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ì…ë‹ˆë‹¤.<br/>



## â²ï¸ ê°œë°œ ê¸°ê°„
- 2024/12/30 ~
  
## ğŸ§‘â€ğŸ¤â€ğŸ§‘ ê°œë°œì ì†Œê°œ
- ìµœë™í›ˆ
  
## ğŸ’» ê°œë°œí™˜ê²½
- Version : Java 17
- IDE : IntelliJ
- Framework : SpringBoot 3.4.0
- ORM : JPA
  
## âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ
- í”„ë¡ íŠ¸ì—”ë“œ : Vue.js
- ë°±ì—”ë“œ : Spring Boot
- WS/WAS : Tomcat
- ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ : Kafka, Redis
- ìºì‹œ : Redis
- ì„œë²„ ë°°í¬ : Amazon EC2
- ë°ì´í„°ë² ì´ìŠ¤ : Amazon RDS(mysql)
- ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ ë° ê´€ë¦¬ : Amazon S3
- í”„ë¡ì‹œ : nginx
- CI/CD : Jenkins
- ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ : Oauth2, JWT
---
## ğŸ”¸Kafka
### 1ï¸âƒ£ ì‹¤ì‹œê°„ ì¢…ëª© ê²€ìƒ‰ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©
- Prodcuer : ì‚¬ìš©ìê°€ ê²€ìƒ‰í•œ í‹°ì»¤ë¥¼ Kafkaì˜ "stock_search_topic" í† í”½ìœ¼ë¡œ ë¹„ë™ê¸° ì „ì†¡í•œë‹¤.
- Consumer : Kafka ì—ì„œ "stock_search_topic" í† í”½ì„ êµ¬ë…í•˜ì—¬ ìƒˆë¡œìš´ ê²€ìƒ‰ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ ìˆ˜ì‹ í•œë‹¤ -> ìˆ˜ì‹ í•œ ticker ë°ì´í„°ë¥¼ Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ íšŸìˆ˜ ì¦ê°€ ë° ê²€ìƒ‰ ìˆœìœ„ë¥¼ ì¶œë ¥í•œë‹¤.
## ğŸ”¸Redis
### 1ï¸âƒ£ íšŒì›ê°€ì… ì‹œ ì´ë©”ì¼ë¡œë¶€í„° ë°›ëŠ” ì¸ì¦ì½”ë“œë¥¼ 3ë¶„ ë™ì•ˆ ìœ ì§€ í›„ ìë™ ì‚­ì œí•˜ê¸° ìœ„í•´ ì‚¬ìš© (ì¼íšŒì„± ì¸ì¦ì½”ë“œ ì €ì¥ì†Œ)
- Key : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë©”ì¼, Value : ìƒì„±ëœ ì¸ì¦ ì½”ë“œ, Timeout : 3ë¶„ë™ì•ˆ ìœ ì§€ í›„ ìë™ ì‚­ì œ 
### 2ï¸âƒ£ QQQ, SPY ì¢…ëª© ì§€ìˆ˜ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- ì‚¬ìš©ìë§ˆë‹¤ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì„œë²„ê°€ í˜¸ì¶œí•˜ê³  ì´ë¥¼ Redisì— ì €ì¥ í›„ ì¶œë ¥
### 3ï¸âƒ£ ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´ ìˆœìœ„ ê¸°ëŠ¥ì— ì‚¬ìš©
- Kafkaë¡œ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ë©´ ê²€ìƒ‰ í‹°ì»¤ì— ëŒ€í•´ íšŸìˆ˜ë¥¼ ì¦ê°€ ì‹œì¼œ ê²€ìƒ‰ì–´ ìˆœìœ„ ê¸°ëŠ¥ì„ êµ¬í˜„
---
## ğŸš€ StockBurning ì›¹ì‚¬ì´íŠ¸ ì£¼ìš” ê¸°ëŠ¥

1ï¸âƒ£ ğŸ“Š ì‹¤ì‹œê°„ ì£¼ì‹ ì •ë³´ ì œê³µ
- ë‚˜ìŠ¤ë‹¥ IT ëŒ€í˜•ì£¼ì— íˆ¬ìí•˜ëŠ” ETF ì¸ 'QQQ' ì™€ S&P 500 ì— íˆ¬ìí•˜ëŠ” ETF ì¸ 'SPY' ì˜ ì§€ìˆ˜ë¥¼ 2ë¶„ ì§€ì—°ëœ ì§€ìˆ˜ë¡œ ì¶œë ¥

2ï¸âƒ£ ğŸ—£ï¸ ì£¼ì‹ í† ë¡  ì»¤ë®¤ë‹ˆí‹°
- íŠ¹ì • ì¢…ëª©ì— ëŒ€í•œ ì‚¬ìš©ì ì˜ê²¬ê³¼ ìƒìŠ¹ ë° í•˜ë½ ì˜ê²¬ì„ í•¨ê»˜ í‘œì¶œ ê°€ëŠ¥
- ê²Œì‹œê¸€ì— ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥
- ì¼ì£¼ì¼ ê°„ ê²Œì‹œê¸€ì˜ ìˆ˜ì™€ ìƒìŠ¹/í•˜ë½ ì˜ê²¬ ìˆ˜ ë³€í™”ëŸ‰ì„ ì°¨íŠ¸í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©ìë“¤ì—ê²Œ ì œê³µ

3ï¸âƒ£ ğŸ“Œ ì¸ê¸° ê²€ìƒ‰ ì¢…ëª© ìˆœìœ„ ë¶„ì„
- ì‚¬ìš©ìë“¤ì˜ ê²€ìƒ‰ëŸ‰ì„ ê¸°ë°˜ìœ¼ë¡œ ê²€ìƒ‰ëŸ‰ ê¸‰ë“±í•˜ëŠ” ì¢…ëª© ìˆœìœ„ ì œê³µ
- Kafka & Redisë¥¼ í™œìš©í•´ 10ë¶„ ë‹¨ìœ„ë¡œ ê²€ìƒ‰ëŸ‰ ë­í‚¹ ë°˜ì˜
- ì‚¬ìš©ìë“¤ì´ ìƒìŠ¹ ì˜ê²¬ì— ë°°íŒ…í•œ ìƒìœ„ 3 ì¢…ëª© ìˆœìœ„ ì œê³µ

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì³
![stockburning drawio](https://github.com/user-attachments/assets/b5531c2d-fee1-4389-9743-e237ea40946a)

## ğŸ“ ER ë‹¤ì´ì–´ê·¸ë¨
![Untitled](https://github.com/user-attachments/assets/2adf2b70-2f55-40cc-81e6-f360a93d4940)

## ğŸ“ ë¡œê·¸ì¸ í›„ API ìš”ì²­ê¹Œì§€ í‘œí˜„í•œ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
![image](https://github.com/user-attachments/assets/8faa5ded-a37a-4e11-8bcc-de38734ce433)

## ğŸ“ ì™€ì´ì–´í”„ë ˆì„(í™”ë©´ êµ¬ì„±)
![image](https://github.com/user-attachments/assets/b91347f6-1896-4c67-817a-19519892d63b)

## ğŸ“ êµ¬í˜„(ì´ë¯¸ì§€)
1ï¸âƒ£ ë©”ì¸í™”ë©´ (ë¹„ë¡œê·¸ì¸ ìƒíƒœ)
![1](https://github.com/user-attachments/assets/3f820c2c-b010-46fb-9e14-db44defb3ac2)

2ï¸âƒ£ ë©”ì¸í™”ë©´ (ë¡œê·¸ì¸ ìƒíƒœ)
![2](https://github.com/user-attachments/assets/46b6c8aa-c023-4ce9-82ac-ee8bed7378df)

3ï¸âƒ£ í‹°ì»¤ ì…ë ¥ í›„ í™”ë©´
![image](https://github.com/user-attachments/assets/dfda2536-8d13-4c99-981d-7b9d58919094)

4ï¸âƒ£ ë¡œê·¸ì¸ í™”ë©´
![image](https://github.com/user-attachments/assets/d9cd722d-5bb2-498d-b004-3bf7b7171c8f)

5ï¸âƒ£ íšŒì›ê°€ì… í™”ë©´
![image](https://github.com/user-attachments/assets/d1abe1ea-ecb5-4336-96d3-2728ef2964ea)

6ï¸âƒ£ ì•„ì´ë”” ì°¾ê¸° í™”ë©´
![image](https://github.com/user-attachments/assets/e8d1bed6-9938-4beb-8098-6f0b95205ecc)

7ï¸âƒ£ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í™”ë©´
![image](https://github.com/user-attachments/assets/3acc4b62-6a38-4357-baad-39b6f6d57ded)

8ï¸âƒ£ ì •ë³´ ìˆ˜ì • í™”ë©´
![image](https://github.com/user-attachments/assets/d5a4549a-b95a-4fbb-92f4-b0d3485affe9)

9ï¸âƒ£ ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì • í™”ë©´
![image](https://github.com/user-attachments/assets/b6e7dde4-4894-4e8d-87c5-e0946f2a4d80)

1ï¸âƒ£0ï¸âƒ£ ì„¤ì • í™”ë©´
![image](https://github.com/user-attachments/assets/abc130ab-8b0a-4aff-b113-441231857dd1)

## ğŸ“ êµ¬í˜„(ë™ì˜ìƒ)

---
### 1ï¸âƒ£ íšŒì›ê°€ì…

https://github.com/user-attachments/assets/3d96fb9c-b3d7-4a29-ab03-ff5b64fc9b4f



---
### 2ï¸âƒ£ ê²Œì‹œê¸€ ì‘ì„± ë° í‹°ì»¤ ê²€ìƒ‰

https://github.com/user-attachments/assets/59115b4f-cd25-4f5f-8781-b923d30da1ad



---
### 3ï¸âƒ£ ê²Œì‹œê¸€ ì‚­ì œ ë° ìˆ˜ì •

https://github.com/user-attachments/assets/65216202-f400-4c50-acb3-b51d6cce08b5



---
### 4ï¸âƒ£ ì•„ì´ë”” ì°¾ê¸°

https://github.com/user-attachments/assets/f2032d45-e00d-4ba0-9b78-e20b6ffe1722


---
### 5ï¸âƒ£ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°

https://github.com/user-attachments/assets/015e8d13-cf49-487a-addb-bb947f470c04


---
### 6ï¸âƒ£ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

https://github.com/user-attachments/assets/7a9a03c4-e5de-4bf2-877d-9fba60c39661



---
### 7ï¸âƒ£ ë‹‰ë„¤ì„ ë³€ê²½

https://github.com/user-attachments/assets/53ca2484-366e-4b55-811f-0161ebcf8ee8


---
### 8ï¸âƒ£ í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½

https://github.com/user-attachments/assets/810fc231-b5c7-477b-b2f2-1053d857dcc7


---
### 9ï¸âƒ£ ê³„ì • íƒˆí‡´

https://github.com/user-attachments/assets/efe74dc0-174c-4f41-aef4-d7a38c7e0f94



---
### 9ï¸âƒ£ ì¢‹ì•„ìš” ê¸°ëŠ¥ ë° ëŒ“ê¸€ ì‘ì„±

https://github.com/user-attachments/assets/fb03c64a-4649-4321-8eae-8379a5231f54





## ğŸ“Œ ë°°ìš´ì 
---
#### âœ… ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ê¸°ë³¸ì ì¸ êµ¬ì¡°ë¥¼ í”¼ê·¸ë§ˆë¡œ ì§ì ‘ ê·¸ë ¤ê°€ë©° ì´í•´í•˜ì˜€ë‹¤.
![image](https://github.com/user-attachments/assets/8f9afccf-6311-4f86-ba3e-30290bc0580b)

---
#### âœ… Jwtì˜ ê¸°ë³¸ì ì¸ êµ¬ì¡°ì™€ accessToken, refreshTokenì„ ë©”ëª¨ë¦¬, ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€, ë¡œì»¬ ìŠ¤í† ë¦¬ì§€, ì¿ í‚¤ ì¤‘ ì–´ë””ì— ì €ì¥í•˜ëŠ”ê²Œ ë³´ì•ˆìƒ ì•ˆì „í•œì§€, Jwtë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë³´ì•ˆìƒ ì¡°ì‹¬í•´ì•¼í•  ì ì´ ì €ì¥ ìœ„ì¹˜ë¿ë§Œ ë‹¤ìŒê³¼ ê°™ì€ í•­ëª©ë“¤ì„ ìœ ì˜í•´ì•¼í•œë‹¤ëŠ” ì 
1. ì„œëª… ì•Œê³ ë¦¬ì¦˜(none ì‚¬ìš©ê¸ˆì§€)
2. ìœ íš¨ ê¸°ê°„(ê¸¸ê²Œ í•˜ë©´ ë³´ì•ˆì— ì·¨ì•½)
3. PayloadëŠ” ë°ì´í„°ê°€ ë…¸ì¶œë˜ë¯€ë¡œ ë¯¼ê°í•œ ì •ë³´ëŠ” ì €ì¥í•˜ì§€ ì•Šê¸°
4. CORS ì„¤ì •
5. CSRF ê³µê²© ë°©ì§€ë¥¼ ìœ„í•´ SameSite = strictë¡œ ì„¤ì •![image](https://github.com/user-attachments/assets/3b7a48e4-4e71-4bba-b259-b33e6326f4fa)
6. refreshTokenì€ HttpOnly Secure Cookie ì‚¬ìš© ![image](https://github.com/user-attachments/assets/5fea2313-12a7-421e-af52-b98d2af4824b)
![image](https://github.com/user-attachments/assets/4bf89764-523b-4bb9-9ead-8c64cb140958)
---
#### âœ… ì‚¬ìš©ìê°€ OAuth2 ë¥¼ í†µí•´ ë¡œê·¸ì¸í•  ë•Œ ì–´ë–¤ ë¡œì§ì„ í†µí•´ ì¸ì¦ì„ í•˜ëŠ”ì§€ í”¼ê·¸ë§ˆë¡œ ì§ì ‘ ê·¸ë ¤ê°€ë©° ì´í•´í•˜ì˜€ìœ¼ë©° ë§¨ ì²˜ìŒ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸í˜ì´ì§€ì— ì ‘ì†í•˜ëŠ” ê²ƒë¶€í„° Authorization Server ì— AccessTokenì„ ìš”ì²­í•˜ê³  ë°œê¸‰ë°›ê³  ë‹¤ì‹œ Resource Serverì— AccessTokenì„ í†µí•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•˜ëŠ” ê³¼ì • ëª¨ë‘ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ SecurityConfig ì— ì¶”ê°€ì ìœ¼ë¡œ Oauth2 ê´€ë ¨ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ì†Œì…œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤.  
![image](https://github.com/user-attachments/assets/1be14263-8b78-4921-87cf-0b3f30a62282)



## âœ’ï¸ ì‚¬ìš©í•œ API
- QQQ, SPY ì§€ìˆ˜ : [https://finnhub.io/](https://finnhub.io/)

